<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
		http://www.springframework.org/schema/webflow 
		http://www.springframework.org/schema/webflow/spring-webflow.xsd">

	<on-start>
		<evaluate expression="dishController.createDish()" result="flowScope.dish" />
	</on-start>
		
	<view-state id="createDish" model="dish" view="toCreateDish">
		<on-render>
			<evaluate expression="dishController.createDishAdditives()" result="requestScope.dishAdditives" />
			<evaluate expression="dishController.getAllVegetables()" result="requestScope.allVegetables" />
		</on-render> 		
		<transition on="selectAdditiveType" >
			<evaluate expression="dishController.determineTypeOfAdditives(flowScope.dish.additiveToChoose)"  result="flowScope.pickedAdditives"/>
			<render fragments="selectedAdditive"/>						
		</transition>
		<transition on="save"  to="overviewCreatedDish">
			<evaluate expression="dishController.saveDish(flowScope.dish)"  result="flowScope.dish"/>
		</transition>		
	</view-state>	
	
	<view-state id="overviewCreatedDish" model="dish" view="toOverviewCreatedDish">
		<transition on="toSelectDishAdditive"  to="createDish" />					
	</view-state>	
		
	
		
</flow>